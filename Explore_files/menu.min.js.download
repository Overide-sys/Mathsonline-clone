function addCourseListeners(){$("#course-list ul li a").click(function(){return $("#topic-list").empty(),$("#lesson-list").empty(),$("#stream-list").empty().append("<div id='loading' style='padding-top:6px; text-align: center'><i class='fa fa-circle-o-notch fa-spin fa-2x fa-fw'></i></div>"),$("#course-list ul li a").removeClass("active"),$(this).addClass("active"),$("#slide-forward").fadeOut("fast"),courseCaption=escapeHtml($(this).text()),streamCaption="",topicCaption="",updateTopicHeader(),$.ajax({type:"POST",url:"/ajax/students/getStreams",data:{hash:this.hash},success:function(e){1==e.sessionexpired?showSessionExpired():($("#stream-list").fadeOut(0),$("#stream-list").html(e.html).fadeTo("slow",1),addStreamListeners(),scrollToStreams(),$(document).trigger("update-mobile-slider-state",["forward"]))}}),!1})}function addStreamListeners(){$("#stream-list ul li a").click(function(){return $("#lesson-list").empty(),$("#topic-list").empty().append("<div id='loading' style='padding-top:6px; text-align: center'><i class='fa fa-circle-o-notch fa-spin fa-2x fa-fw'></i></div>"),$("#stream-list ul li a").removeClass("active"),$(this).addClass("active"),$("#slide-forward").fadeOut("fast"),streamCaption=escapeHtml($(this).text()),topicCaption="",updateTopicHeader(),$.ajax({type:"POST",url:"/ajax/students/getTopics",data:{hash:this.hash},success:function(e){1==e.sessionexpired?showSessionExpired():($("#topic-list").fadeOut(0),$("#topic-list").html(e.html).fadeTo("slow",1),addTopicListeners(),scrollToTopics(),$(document).trigger("update-mobile-slider-state",["forward"]))}}),!1})}function addTopicListeners(){$("#topic-list ul li a").click(function(){return $("#lesson-list").empty().append("<div id='loading' style='padding-top:6px; text-align: center'><i class='fa fa-circle-o-notch fa-spin fa-2x fa-fw'></i></div>"),$("#topic-list ul li a").removeClass("active"),$(this).addClass("active"),topicCaption=escapeHtml($(this).attr("data-topic-caption")),updateTopicHeader(),750<=$(window).width()&&scrollToLessons(),$(window).width()<750&&scrollToLessonsMobile(),$.ajax({type:"POST",url:"/ajax/students/getLessons",data:{hash:this.hash},success:function(data){1==data.sessionexpired?showSessionExpired():($("#lesson-list").html(data.html),$("#lesson-list").find("script").each(function(i){eval($(this).text())}),addSlideBackListener(),addRatingListener(),addFavouriteListener(),addPhotoBox(),forwardButton.hide(),backButton.show(),$(document).trigger("update-mobile-slider-state",["forward"]))}}),!1})}function addSlideBackListener(){$("#slide-back").click(function(){scrollToCourses(),currentSlide="courses",backButton.hide(),""!=$("#lesson-list").html()&&forwardButton.show()})}function addSlideForwardListener(){$("#slide-forward").click(function(){750<=$(window).width()&&(scrollToLessons(),currentSlide="lessons"),$(window).width()<750&&(scrollToLessonsMobile(),currentSlide="lessons-mobile"),backButton.show(),$(this).hide()})}function updateTopicHeader(){mobileTopicHeader=courseCaption,""!=streamCaption&&(mobileTopicHeader+=chevron+streamCaption),""!=topicCaption&&(mobileTopicHeader+=chevron+topicCaption),$("#topic-header, #topic-header-mobile").html("<div class='text-muted' style='font-size:14px; line-height: 16px'>"+mobileTopicHeader+"</div>")}function addPhotoBox(){$(".topicLessons").photobox("a.lessons-thumbnail-gallery",{time:0})}addCourseListeners(),addStreamListeners(),addTopicListeners(),addSlideBackListener(),addSlideForwardListener(),updateTopicHeader(),addRatingListener(),addFavouriteListener(),addPhotoBox(),$("#select-menu").click(function(){return $("#menu-list").fadeToggle("slow"),!1}),$("#menu-list").fadeOut(0),"lessons"==currentSlide?(backButton.show(),forwardButton.hide()):backButton.hide(),$('[data-toggle="tooltip"]').tooltip();var mobileBackButton=$("#mobile-slide-back"),mobileForwardButton=$("#mobile-slide-forward"),topicListContainer=$("#topic-list"),lessonListContainer=$("#lesson-list"),resizeTimer;switch($(window).resize(function(e){clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){"lessons"==currentSlide||"lessons-mobile"==currentSlide?(currentSlide=750<=$(window).width()?(scrollToLessons(),"lessons"):(scrollToLessonsMobile(),"lessons-mobile"),$(document).trigger("update-mobile-slider-state",["forward"])):(scrollToCourses(),currentSlide="courses",$(document).trigger("update-mobile-slider-state",["back"]),mobileBackButton.hide(),""!=$("#lesson-list").html()&&(mobileForwardButton.show(),forwardButton.show(),backButton.hide()))},150)}),currentSlide){case"courses":scrollToCourses();break;case"streams":scrollToStreams(),""!=$("#topics-list").html()&&mobileForwardButton.hide();break;case"topics":scrollToTopics(),""!=$("#lesson-list").html()&&mobileForwardButton.hide();break;case"lessons":case"lessons-mobile":750<=$(window).width()&&scrollToLessons(),$(window).width()<750&&scrollToLessonsMobile()}function addMobileSlideBackListener(){mobileBackButton.click(function(e){switch(e.preventDefault(),currentSlide){case"streams":scrollToCourses(),currentSlide="courses";break;case"topics":scrollToStreams(),currentSlide="streams";break;case"lessons-mobile":scrollToTopics(),currentSlide="topics"}$(document).trigger("update-mobile-slider-state",["back"])})}function addMobileSlideForwardListener(){mobileForwardButton.click(function(e){switch(e.preventDefault(),currentSlide){case"courses":scrollToStreams(),currentSlide="streams";break;case"streams":scrollToTopics(),currentSlide="topics";break;case"topics":""!=$("#lesson-list").html()&&(750<=$(window).width()&&scrollToLessons(),$(window).width()<750&&scrollToLessonsMobile(),currentSlide="lessons-mobile");break;case"lessons-mobile":$(this).hide()}$(document).trigger("update-mobile-slider-state","forward")})}$(document).on("update-mobile-slider-state",function(e,s){switch(s){case"back":switch(currentSlide){case"courses":mobileBackButton.hide(),mobileForwardButton.show();break;case"streams":mobileBackButton.show(),topicListContainer.html()&&mobileForwardButton.show();break;case"topics":topicListContainer.html()&&mobileForwardButton.show()}break;case"forward":switch(currentSlide){case"streams":mobileBackButton.show(),topicListContainer.html()?mobileForwardButton.show():mobileForwardButton.hide();break;case"topics":mobileBackButton.show(),lessonListContainer.html()?mobileForwardButton.show():mobileForwardButton.hide();break;case"lessons-mobile":mobileBackButton.show(),mobileForwardButton.hide()}}}),addMobileSlideBackListener(),addMobileSlideForwardListener(),$(".menu-items-scroller").swipe({swipe:function(e,s,t,o,i,r){switch(s){case"right":switch(currentSlide){case"streams":scrollToCourses(),currentSlide="courses";break;case"topics":scrollToStreams(),currentSlide="streams";break;case"lessons":case"lessons-mobile":scrollToTopics(),currentSlide="topics"}$(document).trigger("update-mobile-slider-state","back");break;case"left":switch(currentSlide){case"courses":scrollToStreams(),currentSlide="streams";break;case"streams":scrollToTopics(),currentSlide="topics";break;case"topics":""!=$("#lesson-list").html()&&(750<=$(window).width()&&scrollToLessons(),$(window).width()<750&&scrollToLessonsMobile()),currentSlide="lessons-mobile"}$(document).trigger("update-mobile-slider-state","forward")}},threshold:100,allowPageScroll:"auto"});