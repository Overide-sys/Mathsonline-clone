!function(a){function b(d,e,g,h,i){5>h?a.ajax({type:"POST",url:"/ajax/interactives/submitMultipleChoiceAnswer",data:g,dataType:"json",success:function(a){if("false"===a.correct){for(var b=a.results.split(","),c=0;c<b.length;c++){var f=b[c].split(":");"Y"==f[1]?"Y"==f[0]&&d.find("#selectables").find("[data-order='"+(c+1)+"'] .small-tick").fadeIn("slow"):"Y"==f[0]?d.find("#selectables").find("[data-order='"+(c+1)+"'] .small-cross").fadeIn("slow"):d.find("#selectables").find("[data-order='"+(c+1)+"'] .correct-arrow").fadeIn("slow")}d.find("#correct-answer").fadeIn("slow"),d.find(".overall-cross").fadeIn("slow")}else d.find(".overall-tick").fadeIn("slow");e(a)},error:function(a){i=a.responseText.length>0?a.responseText:"Network error",g.errorFunction="ajaxSubmitMultipleChoiceAnswer",g.retryCount=h,g.lastError=i,h>1?(setTimeout(function(){c(6)},1e3),setTimeout(function(){b(d,e,g,h+1,i)},6e3)):b(d,e,g,h+1,i)}}):setTimeout(function(){f.show()},1e3)}function c(a){a--,a>0?(e.show({html:"Awaiting network. Could not submit your answer at this time. Will try again in "+a+(a>1?" seconds.":" second.")}),setTimeout(function(){c(a)},1e3)):e.hide()}var d={init:function(b){var c=a(this);c.find(".overall-tick").fadeOut(0),c.find("#correct-answer").fadeOut(0),c.find(".overall-cross").fadeOut(0),c.find(".correct-arrow").fadeOut(0),c.find(".small-tick").fadeOut(0),c.find(".small-cross").fadeOut(0),c.find(".selectable").click(function(){b.selectMultiple||c.find(".selectable").removeClass("active"),a(this).toggleClass("active")})},submit:function(c,d,e,g,h){var i=a(this),j="",k=0;f.hide(),i.find(".selectable").each(function(b){b>0&&(j+=","),j+=a(this).attr("data-graphicid")+":",a(this).hasClass("active")?(j+="Y",k++):j+="N"}),0==k?alert("At least one answer must be selected."):(i.mc("disable"),a("#button-submit-answer").attr("disabled","disabled"),a("#interactives-container").trigger("stop-timer"),iResubmit=0,lastError="",ajaxData={answers:j,question:d,questionSet:c,activeTutorial:e,duration:g,tutorial:tutorial},b(i,h,ajaxData,iResubmit,lastError))},disable:function(){a(this).find(".selectable").unbind("click").css("cursor","default")},prepareToPrint:function(){}};a.fn.mc=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));var c=typeof b;return"undefined"===c||"object"===c?d.init.apply(this,arguments):void a.error(b+" is not a method.")};var e=new a.peekABar({animation:{type:"fade",duration:1e3},cssClass:"custom-bar"}),f=new a.peekABar({animation:{type:"fade",duration:1e3},cssClass:"custom-bar",html:"Due to an unexpected network error your answer could not submitted at this time. Your progress has been saved. Please try again in a minute.",autohide:!0,delay:15e3,onShow:function(){a("#button-submit-answer").removeAttr("disabled")},onHide:function(){a("#button-submit-answer").removeAttr("disabled")}})}(jQuery);